import{e as Q,g as X,V as R}from"./VTextField-0188063d.js";import{f as Z}from"./forwardRefs-9d31fcaa.js";import{v as K,I as ee,c6 as le,ci as ne,C as ae,G as te,r as T,bV as A,l as w,s as oe,K as ue,i as o,R as B,O as P,V as _,cn as se,p as ie,b_ as re}from"./index-23ca07dd.js";import{m as ce,e as de,V as fe,a as ve,b as E}from"./VMenu-b65371a0.js";import{m as me}from"./VImg-c22b4359.js";import{V as pe}from"./dialog-transition-c8e075fe.js";import{V as he}from"./VCheckboxBtn-75c328c0.js";import{V as Ve}from"./VChip-aad60885.js";const ye=K({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:ee,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:le},...ce({itemChildren:!1})},"select"),Ce=K({...ye(),...ne(Q({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...me({transition:{component:pe}})},"v-select"),Le=ae()({name:"VSelect",props:Ce(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,M){let{slots:n}=M;const{t:U}=te(),D=T(),S=T(),x=A(e,"menu"),f=w({get:()=>x.value,set:l=>{var t;x.value&&!l&&((t=S.value)!=null&&t.Î¨openChildren)||(x.value=l)}}),{items:V,transformIn:N,transformOut:H}=de(e),i=A(e,"modelValue",[],l=>N(re(l)),l=>{const t=H(l);return e.multiple?t:t[0]??null}),m=X(),y=w(()=>i.value.map(l=>V.value.find(t=>e.valueComparator(t.value,l.value))||l)),F=w(()=>y.value.map(l=>l.props.value)),p=oe(!1);let b="",O;const I=w(()=>e.hideSelected?V.value.filter(l=>!y.value.some(t=>t===l)):V.value),h=T();function $(l){e.openOnClear&&(f.value=!0)}function j(){e.hideNoData&&!V.value.length||e.readonly||m!=null&&m.isReadonly.value||(f.value=!f.value)}function z(l){var a,r,c,u;if(e.readonly||m!=null&&m.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(f.value=!0),["Escape","Tab"].includes(l.key)&&(f.value=!1),l.key==="ArrowDown"?(a=h.value)==null||a.focus("next"):l.key==="ArrowUp"?(r=h.value)==null||r.focus("prev"):l.key==="Home"?(c=h.value)==null||c.focus("first"):l.key==="End"&&((u=h.value)==null||u.focus("last"));const t=1e3;function v(d){const s=d.key.length===1,g=!d.ctrlKey&&!d.metaKey&&!d.altKey;return s&&g}if(e.multiple||!v(l))return;const C=performance.now();C-O>t&&(b=""),b+=l.key.toLowerCase(),O=C;const k=V.value.find(d=>d.title.toLowerCase().startsWith(b));k!==void 0&&(i.value=[k])}function L(l){if(e.multiple){const t=F.value.findIndex(v=>e.valueComparator(v,l.value));if(t===-1)i.value=[...i.value,l];else{const v=[...i.value];v.splice(t,1),i.value=v}}else i.value=[l],f.value=!1}function q(l){var t;(t=h.value)!=null&&t.$el.contains(l.relatedTarget)||(f.value=!1)}function G(){var l;p.value&&((l=D.value)==null||l.focus())}function W(l){p.value=!0}return ue(()=>{const l=!!(e.chips||n.chip),t=!!(!e.hideNoData||I.value.length||n.prepend||n.append||n["no-data"]),v=i.value.length>0,[C]=R.filterProps(e),k=v||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return o(R,P({ref:D},C,{modelValue:i.value.map(a=>a.props.value).join(", "),"onUpdate:modelValue":a=>{a==null&&(i.value=[])},focused:p.value,"onUpdate:focused":a=>p.value=a,validationValue:i.externalValue,dirty:v,class:["v-select",{"v-select--active-menu":f.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,readonly:!0,placeholder:k,"onClick:clear":$,"onMousedown:control":j,onBlur:q,onKeydown:z}),{...n,default:()=>o(B,null,[o(fe,P({ref:S,modelValue:f.value,"onUpdate:modelValue":a=>f.value=a,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:G},e.menuProps),{default:()=>[t&&o(ve,{ref:h,selected:F.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:a=>a.preventDefault(),onFocusin:W},{default:()=>{var a,r,c;return[!I.value.length&&!e.hideNoData&&(((a=n["no-data"])==null?void 0:a.call(n))??o(E,{title:U(e.noDataText)},null)),(r=n["prepend-item"])==null?void 0:r.call(n),I.value.map((u,d)=>{var g;const s=P(u.props,{key:d,onClick:()=>L(u)});return((g=n.item)==null?void 0:g.call(n,{item:u,index:d,props:s}))??o(E,s,{prepend:Y=>{let{isSelected:J}=Y;return o(B,null,[e.multiple&&!e.hideSelected?o(he,{key:u.value,modelValue:J,ripple:!1,tabindex:"-1"},null):void 0,u.props.prependIcon&&o(_,{icon:u.props.prependIcon},null)])}})}),(c=n["append-item"])==null?void 0:c.call(n)]}})]}),y.value.map((a,r)=>{var d;function c(s){s.stopPropagation(),s.preventDefault(),L(a)}const u={"onClick:close":c,onMousedown(s){s.preventDefault(),s.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:a.value,class:"v-select__selection"},[l?n.chip?o(se,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:a.title}}},{default:()=>{var s;return[(s=n.chip)==null?void 0:s.call(n,{item:a,index:r,props:u})]}}):o(Ve,P({key:"chip",closable:e.closableChips,size:"small",text:a.title},u),null):((d=n.selection)==null?void 0:d.call(n,{item:a,index:r}))??o("span",{class:"v-select__selection-text"},[a.title,e.multiple&&r<y.value.length-1&&o("span",{class:"v-select__selection-comma"},[ie(",")])])])})]),"append-inner":function(){var u;for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return o(B,null,[(u=n["append-inner"])==null?void 0:u.call(n,...r),e.menuIcon?o(_,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Z({isFocused:p,menu:f,select:L},D)}});export{Le as V};
