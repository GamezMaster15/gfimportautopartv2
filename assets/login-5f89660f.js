import{r as u,d as y,o as _,c as g,i as e,f as a,bQ as h,a as c,bS as C,p,e as k,t as q,P as S}from"./index-a3a041e5.js";import{_ as N}from"./logo-428331b1.js";import{g as T,q as B,w as I,c as v,d as V,j as D}from"./firebase-27c2c523.js";import{a as E,b as R,c as j,V as w}from"./VCard-d5960204.js";import{V as L}from"./VForm-1478cd20.js";import{V as P}from"./VRow-0d87a710.js";import{V as i}from"./VCol-ad427ed1.js";import{V as b}from"./VTextField-bf94655d.js";import{V as U}from"./VAlert-609e8963.js";import"./VAvatar-8b72b2c7.js";import"./VImg-b9f8bb6a.js";import"./forwardRefs-9d31fcaa.js";import"./index-43b2f89a.js";const A={class:"auth-wrapper d-flex align-center justify-center pa-4"},F=c("img",{src:N,width:"150"},null,-1),M=c("p",{class:"mb-0 text-center"}," Por favor inicie sesion con su cuenta. ",-1),Q={class:"mt-5"},$=c("span",null,"No tienes cuenta?",-1),oe={__name:"login",setup(z){const o=u(!1),d=u(""),x=async()=>{const l=await T(B(v(V,"users"),I("username","==",s.value.name)));l.empty?(o.value=!0,d.value="El nombre de usuario que ingresaste no esta conectado a ninguna cuenta :/",setTimeout(()=>{o.value=!1},5e3)):l.forEach(async t=>{if(t.data().password===s.value.password){const m={active:!0,id_user:t.id,typeuser:t.data().typeuser};await D(v(V,"session"),m).then(()=>{localStorage.setItem("id_user",t.id),localStorage.setItem("username",s.value.name),window.location.replace("/")})}else o.value=!0,d.value="La contraseña que ingresaste es incorrecta :/",setTimeout(()=>{o.value=!1},5e3)})},s=u({name:"",password:"",remember:!1}),r=u(!1),f=l=>!!l||"Este campo es requerido";return(l,t)=>{const m=y("RouterLink");return _(),g("div",A,[e(E,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:a(()=>[e(R,{class:"justify-center"},{default:a(()=>[e(j,{class:"text-2xl font-weight-bold"},{default:a(()=>[F]),_:1})]),_:1}),e(w,{class:""},{default:a(()=>[M]),_:1}),e(w,null,{default:a(()=>[e(L,{onSubmit:h(x,["prevent"])},{default:a(()=>[e(P,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(b,{modelValue:s.value.name,"onUpdate:modelValue":t[0]||(t[0]=n=>s.value.name=n),autofocus:"",placeholder:"Carlitos12qr",label:"Nombre de Usuario",type:"text",rules:[f]},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(b,{modelValue:s.value.password,"onUpdate:modelValue":t[1]||(t[1]=n=>s.value.password=n),label:"Contraseña",placeholder:"············",type:r.value?"text":"password","append-inner-icon":r.value?"bx-hide":"bx-show","onClick:appendInner":t[2]||(t[2]=n=>r.value=!r.value),rules:[f]},null,8,["modelValue","type","append-inner-icon","rules"]),c("div",Q,[e(C,{block:"",type:"submit"},{default:a(()=>[p(" Iniciar sesion ")]),_:1})])]),_:1}),e(i,null,{default:a(()=>[o.value?(_(),k(U,{key:0},{default:a(()=>[p(q(d.value),1)]),_:1})):S("",!0)]),_:1}),e(i,{cols:"12",class:"text-center text-base"},{default:a(()=>[$,e(m,{class:"text-primary ms-2",to:"/register"},{default:a(()=>[p(" Solicitar tu cuenta ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})])}}};export{oe as default};
